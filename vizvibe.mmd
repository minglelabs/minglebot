flowchart TD
    %% === PROJECT GOALS ===
    %% Ultimate Goal: Complete a local-first personal data hub usable by user-owned AI agents
    %% Current Goal: Ship v1 manual-batch import with reliable dedupe/upsert and agent-usable output

    %% === COMPLETED WORK ===
    %% @project_start [start, closed, 2026-02-13, nam]
    project_start("Project Kickoff<br/><sub>Defined local-first mission and<br/>set focus on centralizing chat data<br/>for practical personal AI workflows</sub>")

    %% @readme_foundation [ai-task, closed, 2026-02-13, nam]
    readme_foundation("README Foundation<br/><sub>Documented mission, scope, and<br/>manual-batch v1 direction for public<br/>repo visitors and contributors</sub>")

    %% @architecture_v1 [ai-task, closed, 2026-02-13, nam]
    architecture_v1("Architecture v1<br/><sub>Defined provider adapters, import<br/>pipeline stages, and local storage<br/>contracts for implementable v1</sub>")

    %% @filesystem_format_v1 [ai-task, closed, 2026-02-13, nam]
    filesystem_format_v1("Filesystem Format v1<br/><sub>Specified raw/provider/canonical<br/>layout with dedupe/upsert rules and<br/>agent-searchable NDJSON outputs</sub>")

    %% @uiux_v1_spec [ai-task, closed, 2026-02-13, nam]
    uiux_v1_spec("UI/UX Spec v1<br/><sub>Defined import-first desktop flow,<br/>run states, dedupe summaries, and<br/>non-developer friendly UX baseline</sub>")

    %% @batch_import_decision [ai-task, closed, 2026-02-13, nam]
    batch_import_decision("v1 Batch Import Decision<br/><sub>Locked v1 to user-driven package<br/>imports and removed mandatory email<br/>automation dependency from scope</sub>")

    %% === V1 BUILD TRACK ===
    %% @desktop_shell [ai-task, opened, 2026-02-13, nam]
    desktop_shell("Desktop Shell<br/><sub>Implement local app shell and core<br/>navigation: Home, Import, Runs,<br/>Data, Settings</sub>")

    %% @import_intake [ai-task, opened, 2026-02-13, nam]
    import_intake("Import Intake Engine<br/><sub>Handle package selection, format<br/>validation, extraction to raw, and<br/>job metadata recording</sub>")

    %% @chatgpt_parser_mapper [ai-task, opened, 2026-02-13, nam]
    chatgpt_parser_mapper("ChatGPT Parser/Mapper<br/><sub>Convert provider export into<br/>provider + canonical datasets with<br/>stable IDs and provenance fields</sub>")

    %% @claude_parser_mapper [ai-task, opened, 2026-02-13, nam]
    claude_parser_mapper("Claude Parser/Mapper<br/><sub>Implement provider-specific parse<br/>logic and canonical mapping with<br/>dedupe-safe upsert behavior</sub>")

    %% @dedupe_upsert_engine [ai-task, opened, 2026-02-13, nam]
    dedupe_upsert_engine("Dedupe/Upsert Engine<br/><sub>Ensure repeated full exports update<br/>existing canonical records without<br/>uncontrolled duplication</sub>")

    %% @runs_and_result_ui [ai-task, opened, 2026-02-13, nam]
    runs_and_result_ui("Runs and Result UX<br/><sub>Expose run history, status stages,<br/>and change counters: new/updated/<br/>unchanged/failed</sub>")

    %% @agent_handoff [ai-task, opened, 2026-02-13, nam]
    agent_handoff("Agent Handoff Surface<br/><sub>Provide copy-ready `rg`/`jq`/`find`<br/>commands and clear data-root paths<br/>for immediate post-import usage</sub>")

    %% @gemini_path_v1_5 [ai-task, opened, 2026-02-13, nam]
    gemini_path_v1_5("Gemini Path (v1.5)<br/><sub>Integrate stable collection path<br/>after ChatGPT/Claude v1 pipeline is<br/>proven in production usage</sub>")

    %% @v1_done [milestone, opened, 2026-02-13, nam]
    v1_done("V1 Milestone Complete<br/><sub>Manual batch import works reliably<br/>for ChatGPT and Claude with dedupe,<br/>upsert, and agent-ready outputs</sub>")

    %% @ultimate_goal [end, opened, 2026-02-13, nam]
    ultimate_goal("Personal Data Hub Complete<br/><sub>Unified local-first personal data<br/>platform usable by user-owned AI<br/>agent systems at daily workflow level</sub>")

    %% === CONNECTIONS ===
    project_start --> readme_foundation --> architecture_v1 --> filesystem_format_v1 --> uiux_v1_spec --> batch_import_decision
    batch_import_decision --> desktop_shell --> import_intake --> chatgpt_parser_mapper --> claude_parser_mapper --> dedupe_upsert_engine --> runs_and_result_ui --> agent_handoff --> v1_done
    v1_done --> gemini_path_v1_5 --> ultimate_goal

    %% === RECENT WORK HIGHLIGHT ===
    subgraph recent [RECENT]
        batch_import_decision
        filesystem_format_v1
        uiux_v1_spec
    end

    %% === STYLES ===
    style project_start fill:#1f2937,stroke:#f59e0b,color:#fef3c7,stroke-width:1px
    style readme_foundation fill:#1f2937,stroke:#f59e0b,color:#fef3c7,stroke-width:1px
    style architecture_v1 fill:#1f2937,stroke:#f59e0b,color:#fef3c7,stroke-width:1px
    style filesystem_format_v1 fill:#1f2937,stroke:#f59e0b,color:#fef3c7,stroke-width:1px
    style uiux_v1_spec fill:#1f2937,stroke:#f59e0b,color:#fef3c7,stroke-width:1px
    style batch_import_decision fill:#3f2a10,stroke:#fbbf24,color:#fffbeb,stroke-width:2px

    style desktop_shell fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style import_intake fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style chatgpt_parser_mapper fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style claude_parser_mapper fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style dedupe_upsert_engine fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style runs_and_result_ui fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style agent_handoff fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style gemini_path_v1_5 fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style v1_done fill:#1f2937,stroke:#fbbf24,color:#fde68a,stroke-width:2px
    style ultimate_goal fill:#1f2937,stroke:#34d399,color:#a7f3d0,stroke-width:2px

    style recent fill:transparent,stroke:#f59e0b,color:#f59e0b,stroke-width:2px,stroke-dasharray:5 5
