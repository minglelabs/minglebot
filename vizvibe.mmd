flowchart TD
    %% === PROJECT GOALS ===
    %% Ultimate Goal: Complete a local-first personal data hub usable by user-owned AI agents
    %% Current Goal: Ship v1 manual-batch import with reliable dedupe/upsert and agent-usable output

    %% === COMPLETED WORK ===
    %% @project_start [start, closed, 2026-02-13, nam]
    project_start("Project Kickoff<br/><sub>Defined local-first mission and<br/>set focus on centralizing chat data<br/>for practical personal AI workflows</sub>")

    %% @readme_foundation [ai-task, closed, 2026-02-13, nam]
    readme_foundation("README Foundation<br/><sub>Documented mission, scope, and<br/>manual-batch v1 direction for public<br/>repo visitors and contributors</sub>")

    %% @architecture_v1 [ai-task, closed, 2026-02-13, nam]
    architecture_v1("Architecture v1<br/><sub>Defined provider adapters, import<br/>pipeline stages, and local storage<br/>contracts for implementable v1</sub>")

    %% @filesystem_format_v1 [ai-task, closed, 2026-02-13, nam]
    filesystem_format_v1("Filesystem Format v1<br/><sub>Specified raw/provider/canonical<br/>layout with dedupe/upsert rules and<br/>agent-searchable NDJSON outputs</sub>")

    %% @uiux_v1_spec [ai-task, closed, 2026-02-13, nam]
    uiux_v1_spec("UI/UX Spec v1<br/><sub>Defined import-first desktop flow,<br/>run states, dedupe summaries, and<br/>non-developer friendly UX baseline</sub>")

    %% @batch_import_decision [ai-task, closed, 2026-02-13, nam]
    batch_import_decision("v1 Batch Import Decision<br/><sub>Locked v1 to user-driven package<br/>imports and removed mandatory email<br/>automation dependency from scope</sub>")

    %% === V1 BUILD TRACK ===
    %% @desktop_shell [ai-task, closed, 2026-02-13, nam]
    desktop_shell("Desktop Shell<br/><sub>Implement local app shell and core<br/>navigation: Home, Import, Runs,<br/>Data, Settings</sub>")

    %% @import_intake [ai-task, closed, 2026-02-13, nam]
    import_intake("Import Intake Engine<br/><sub>Handle package selection, format<br/>validation, extraction to raw, and<br/>job metadata recording</sub>")

    %% @chatgpt_parser_mapper [ai-task, closed, 2026-02-13, nam]
    chatgpt_parser_mapper("ChatGPT Parser/Mapper<br/><sub>Convert provider export into<br/>provider + canonical datasets with<br/>stable IDs and provenance fields</sub>")

    %% @claude_parser_mapper [ai-task, closed, 2026-02-13, nam]
    claude_parser_mapper("Claude Parser/Mapper<br/><sub>Implement provider-specific parse<br/>logic and canonical mapping with<br/>dedupe-safe upsert behavior</sub>")

    %% @dedupe_upsert_engine [ai-task, closed, 2026-02-13, nam]
    dedupe_upsert_engine("Dedupe/Upsert Engine<br/><sub>Ensure repeated full exports update<br/>existing canonical records without<br/>uncontrolled duplication</sub>")

    %% @runs_and_result_ui [ai-task, closed, 2026-02-13, nam]
    runs_and_result_ui("Runs and Result UX<br/><sub>Expose run history, status stages,<br/>and change counters: new/updated/<br/>unchanged/failed</sub>")

    %% @agent_handoff [ai-task, closed, 2026-02-13, nam]
    agent_handoff("Agent Handoff Surface<br/><sub>Provide copy-ready `rg`/`jq`/`find`<br/>commands and clear data-root paths<br/>for immediate post-import usage</sub>")

    %% @v1_done [milestone, closed, 2026-02-13, nam]
    v1_done("V1 Milestone Complete<br/><sub>Manual batch import works reliably<br/>for ChatGPT and Claude with dedupe,<br/>upsert, and agent-ready outputs</sub>")

    %% === POST V1 SHIPPED POLISH ===
    %% @viewer_workspace_ui [ai-task, closed, 2026-02-14, nam]
    viewer_workspace_ui("Viewer Workspace UI Polish<br/><sub>Redesigned to split-pane layout<br/>with conversation list sidebar and<br/>full-height chat reading workspace</sub>")

    %% @import_flow_simplification [ai-task, closed, 2026-02-14, nam]
    import_flow_simplification("Import Flow Simplification<br/><sub>Reduced steps, clarified actions,<br/>and aligned run/import transitions<br/>for non-developer usability</sub>")

    %% @history_navigation_sync [ai-task, closed, 2026-02-14, nam]
    history_navigation_sync("Browser History Sync<br/><sub>Synced step state with URL query<br/>so browser back/forward navigation<br/>works across import and viewer flow</sub>")

    %% @upload_interaction_polish [ai-task, closed, 2026-02-14, nam]
    upload_interaction_polish("Upload Interaction Polish<br/><sub>Added large drag-and-drop zone,<br/>file replacement/clear actions, and<br/>cleaner import action affordances</sub>")

    %% @provider_identity_labels [ai-task, closed, 2026-02-14, nam]
    provider_identity_labels("Provider Identity Labels<br/><sub>Show assistant brand labels and<br/>optional model metadata in message<br/>headers across normalized viewer</sub>")

    %% @conversation_metadata_backfill [ai-task, closed, 2026-02-14, nam]
    conversation_metadata_backfill("Conversation Metadata Backfill<br/><sub>Recovered missing conversation<br/>titles from source payload fallback<br/>to improve list readability quality</sub>")

    %% @import_feedback_toasts [ai-task, closed, 2026-02-14, nam]
    import_feedback_toasts("Import Feedback Toasts<br/><sub>Delivered import-complete and<br/>action-result feedback using toast<br/>notifications for clear run status</sub>")

    %% @data_folder_actions [ai-task, closed, 2026-02-14, nam]
    data_folder_actions("Data Folder Access Actions<br/><sub>Added direct open-folder actions<br/>for data root and import output to<br/>verify results from desktop quickly</sub>")

    %% @brand_social_consistency [ai-task, closed, 2026-02-14, nam]
    brand_social_consistency("Brand and Social Consistency<br/><sub>Unified MingleBot casing, favicon<br/>identity, and OG title/description/<br/>image for repo and web previews</sub>")

    %% @v1_polish_done [milestone, closed, 2026-02-14, nam]
    v1_polish_done("V1 Polish Milestone Complete<br/><sub>Core v1 experience is production-<br/>presentable with cleaner UX and<br/>consistent public-facing branding</sub>")

    %% === POST V1 PARALLEL TRACKS ===
    %% Batch automation track
    %% @batch_schedule_automation [ai-task, opened, 2026-02-13, nam]
    batch_schedule_automation("Batch Automation Scheduler<br/><sub>Add scheduled import windows and<br/>guidance prompts for recurring full<br/>export import workflows</sub>")

    %% @batch_download_watcher [ai-task, opened, 2026-02-13, nam]
    batch_download_watcher("Batch Download Watcher<br/><sub>Detect new export packages in local<br/>watch folders and enqueue imports<br/>without manual file selection</sub>")

    %% @batch_reconcile_reports [ai-task, opened, 2026-02-13, nam]
    batch_reconcile_reports("Batch Reconcile Reports<br/><sub>Generate per-run reconciliation of<br/>new/updated/unchanged records for<br/>operational trust and auditability</sub>")

    %% @batch_automation_done [milestone, opened, 2026-02-13, nam]
    batch_automation_done("Batch Automation Milestone<br/><sub>Hands-off scheduled batch ingestion<br/>is stable for supported providers<br/>with transparent reconciliation</sub>")

    %% Streaming automation track
    %% @streaming_automation_core [ai-task, opened, 2026-02-13, nam]
    streaming_automation_core("Streaming Ingest Core<br/><sub>Introduce incremental ingest engine<br/>for near-real-time updates instead<br/>of full export batch processing</sub>")

    %% @chatgpt_streaming_turn [ai-task, opened, 2026-02-13, nam]
    chatgpt_streaming_turn("ChatGPT Turn-Level Stream<br/><sub>Support per-turn or near-turn delta<br/>updates into canonical records with<br/>stable ordering and idempotency</sub>")

    %% @claude_streaming_turn [ai-task, opened, 2026-02-13, nam]
    claude_streaming_turn("Claude Turn-Level Stream<br/><sub>Implement provider-specific delta<br/>capture so single-turn changes can<br/>arrive without full export cycles</sub>")

    %% @gemini_streaming_turn [ai-task, opened, 2026-02-13, nam]
    gemini_streaming_turn("Gemini Turn-Level Stream<br/><sub>Integrate stable Gemini incremental<br/>path for turn-granularity updates as<br/>officially viable surfaces mature</sub>")

    %% @streaming_conflict_guard [ai-task, opened, 2026-02-13, nam]
    streaming_conflict_guard("Streaming Conflict Guard<br/><sub>Resolve ordering conflicts, retries,<br/>and late-arrival deltas while keeping<br/>canonical dataset deterministic</sub>")

    %% @streaming_automation_done [milestone, opened, 2026-02-13, nam]
    streaming_automation_done("Streaming Automation Milestone<br/><sub>Near-real-time ingest is reliable<br/>enough to reflect single-turn changes<br/>across supported providers</sub>")

    %% Data-consumption provider track
    %% @consumer_provider_layer [ai-task, opened, 2026-02-13, nam]
    consumer_provider_layer("Consumption Provider Layer<br/><sub>Build explicit integrations for data<br/>consumers so each agent ecosystem<br/>can use MingleBot datasets directly</sub>")

    %% @provider_claude_code [ai-task, opened, 2026-02-13, nam]
    provider_claude_code("Claude Code Integration<br/><sub>Provider-specific command and tool<br/>surface for querying canonical and<br/>provider datasets</sub>")

    %% @provider_claude_cowork [ai-task, opened, 2026-02-13, nam]
    provider_claude_cowork("Claude Cowork Integration<br/><sub>Expose retrieval and task-context<br/>interfaces aligned with Cowork usage<br/>patterns and file conventions</sub>")

    %% @provider_codex [ai-task, opened, 2026-02-13, nam]
    provider_codex("Codex Integration<br/><sub>Provide codex-friendly adapters and<br/>query templates for structured local<br/>data exploration and handoff</sub>")

    %% @provider_openclaw [ai-task, opened, 2026-02-13, nam]
    provider_openclaw("OpenClaw Integration<br/><sub>Map MingleBot filesystem and query<br/>ops into OpenClaw tool-call surfaces<br/>for direct personal data usage</sub>")

    %% @provider_mcp_generic [ai-task, opened, 2026-02-13, nam]
    provider_mcp_generic("Generic MCP/Agent Integration<br/><sub>Publish common capability contract<br/>so additional agent providers can be<br/>added with minimal custom glue</sub>")

    %% @consumer_provider_done [milestone, opened, 2026-02-13, nam]
    consumer_provider_done("Consumer Provider Milestone<br/><sub>Major data-consumption providers are<br/>supported with explicit integration<br/>nodes and documented handoff paths</sub>")

    %% @gemini_path_v1_5 [ai-task, opened, 2026-02-13, nam]
    gemini_path_v1_5("Gemini Path (v1.5)<br/><sub>Integrate stable collection path<br/>after ChatGPT/Claude v1 pipeline is<br/>proven in production usage</sub>")

    %% Provider collection track
    %% @provider_collection_layer [ai-task, opened, 2026-02-14, nam]
    provider_collection_layer("Provider Collection Layer<br/><sub>Track source-specific collection<br/>capabilities for each provider and<br/>keep ingestion adapters explicit</sub>")

    %% @source_chatgpt_export_ops [ai-task, opened, 2026-02-14, nam]
    source_chatgpt_export_ops("ChatGPT Source Node<br/><sub>Maintain export compatibility and<br/>schema drift handling for ongoing<br/>ChatGPT package ingestion quality</sub>")

    %% @source_claude_export_ops [ai-task, opened, 2026-02-14, nam]
    source_claude_export_ops("Claude Source Node<br/><sub>Track Claude export format changes<br/>and keep parser stability for local<br/>batch import operations</sub>")

    %% @source_gemini_export_ops [ai-task, opened, 2026-02-14, nam]
    source_gemini_export_ops("Gemini Source Node<br/><sub>Integrate Gemini export payloads<br/>and harden schema mapping into<br/>canonical storage contracts</sub>")

    %% @source_cursor_export_ops [ai-task, opened, 2026-02-14, nam]
    source_cursor_export_ops("Cursor Source Node<br/><sub>Ingest Cursor chat exports (md/json)<br/>and normalize role/message fields<br/>for canonical dataset use</sub>")

    %% @source_claude_code_export_ops [ai-task, opened, 2026-02-14, nam]
    source_claude_code_export_ops("Claude Code Source Node<br/><sub>Map Claude Code session/resume<br/>artifacts into importable records<br/>once stable source paths are fixed</sub>")

    %% @source_codex_export_ops [ai-task, opened, 2026-02-14, nam]
    source_codex_export_ops("Codex Source Node<br/><sub>Define reliable Codex conversation<br/>collection route and normalize into<br/>shared canonical schema</sub>")

    %% @source_antigravity_export_ops [ai-task, opened, 2026-02-14, nam]
    source_antigravity_export_ops("Antigravity Source Node<br/><sub>Investigate stable export/local-log<br/>path and add deterministic parser<br/>for ingestion into MingleBot</sub>")

    %% @provider_collection_done [milestone, opened, 2026-02-14, nam]
    provider_collection_done("Provider Collection Milestone<br/><sub>Major chat providers each have an<br/>explicit source node with importable<br/>local collection path and parser</sub>")

    %% @ultimate_goal [end, opened, 2026-02-13, nam]
    ultimate_goal("Personal Data Hub Complete<br/><sub>Unified local-first personal data<br/>platform usable by user-owned AI<br/>agent systems at daily workflow level</sub>")

    %% === CONNECTIONS ===
    project_start --> readme_foundation --> architecture_v1 --> filesystem_format_v1 --> uiux_v1_spec --> batch_import_decision
    batch_import_decision --> desktop_shell --> import_intake --> chatgpt_parser_mapper --> claude_parser_mapper --> dedupe_upsert_engine --> runs_and_result_ui --> agent_handoff --> v1_done
    v1_done --> viewer_workspace_ui --> import_flow_simplification --> history_navigation_sync --> upload_interaction_polish --> provider_identity_labels --> conversation_metadata_backfill --> import_feedback_toasts --> data_folder_actions --> brand_social_consistency --> v1_polish_done

    v1_polish_done --> gemini_path_v1_5
    v1_polish_done --> provider_collection_layer

    %% Parallel branch A: Batch automation
    v1_polish_done --> batch_schedule_automation --> batch_download_watcher --> batch_reconcile_reports --> batch_automation_done

    %% Parallel branch B: Streaming automation
    v1_polish_done --> streaming_automation_core
    streaming_automation_core --> chatgpt_streaming_turn
    streaming_automation_core --> claude_streaming_turn
    streaming_automation_core --> gemini_streaming_turn
    chatgpt_streaming_turn --> streaming_conflict_guard
    claude_streaming_turn --> streaming_conflict_guard
    gemini_streaming_turn --> streaming_conflict_guard
    streaming_conflict_guard --> streaming_automation_done

    %% Parallel branch C: Data-consumption provider integrations
    v1_polish_done --> consumer_provider_layer
    consumer_provider_layer --> provider_claude_code
    consumer_provider_layer --> provider_claude_cowork
    consumer_provider_layer --> provider_codex
    consumer_provider_layer --> provider_openclaw
    consumer_provider_layer --> provider_mcp_generic
    provider_claude_code --> consumer_provider_done
    provider_claude_cowork --> consumer_provider_done
    provider_codex --> consumer_provider_done
    provider_openclaw --> consumer_provider_done
    provider_mcp_generic --> consumer_provider_done

    %% Parallel branch D: Provider source collection nodes
    provider_collection_layer --> source_chatgpt_export_ops
    provider_collection_layer --> source_claude_export_ops
    provider_collection_layer --> source_gemini_export_ops
    provider_collection_layer --> source_cursor_export_ops
    provider_collection_layer --> source_claude_code_export_ops
    provider_collection_layer --> source_codex_export_ops
    provider_collection_layer --> source_antigravity_export_ops
    source_chatgpt_export_ops --> provider_collection_done
    source_claude_export_ops --> provider_collection_done
    source_gemini_export_ops --> provider_collection_done
    source_cursor_export_ops --> provider_collection_done
    source_claude_code_export_ops --> provider_collection_done
    source_codex_export_ops --> provider_collection_done
    source_antigravity_export_ops --> provider_collection_done

    gemini_path_v1_5 --> ultimate_goal
    batch_automation_done --> ultimate_goal
    streaming_automation_done --> ultimate_goal
    consumer_provider_done --> ultimate_goal
    provider_collection_done --> ultimate_goal

    %% === RECENT WORK HIGHLIGHT ===
    subgraph recent [RECENT]
        source_gemini_export_ops
        source_cursor_export_ops
        history_navigation_sync
        conversation_metadata_backfill
        provider_collection_layer
    end

    %% === STYLES ===
    %% Closed/completed nodes: purple
    style project_start fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style readme_foundation fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style architecture_v1 fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style filesystem_format_v1 fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style uiux_v1_spec fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style batch_import_decision fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:2px

    %% Closed v1 build tasks: purple
    style desktop_shell fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style import_intake fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style chatgpt_parser_mapper fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style claude_parser_mapper fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style dedupe_upsert_engine fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style runs_and_result_ui fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style agent_handoff fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style viewer_workspace_ui fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style import_flow_simplification fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style history_navigation_sync fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style upload_interaction_polish fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style provider_identity_labels fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style conversation_metadata_backfill fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style import_feedback_toasts fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style data_folder_actions fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:1px
    style brand_social_consistency fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:2px

    %% Open tasks: green
    style gemini_path_v1_5 fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style batch_schedule_automation fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style batch_download_watcher fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style batch_reconcile_reports fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style streaming_automation_core fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style chatgpt_streaming_turn fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style claude_streaming_turn fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style gemini_streaming_turn fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style streaming_conflict_guard fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style consumer_provider_layer fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style provider_claude_code fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style provider_claude_cowork fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style provider_codex fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style provider_openclaw fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style provider_mcp_generic fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style provider_collection_layer fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style source_chatgpt_export_ops fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style source_claude_export_ops fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style source_gemini_export_ops fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style source_cursor_export_ops fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style source_claude_code_export_ops fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style source_codex_export_ops fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px
    style source_antigravity_export_ops fill:#111827,stroke:#34d399,color:#a7f3d0,stroke-width:1px

    %% Milestones
    style v1_done fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:2px
    style v1_polish_done fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:2px
    style batch_automation_done fill:#1f2937,stroke:#fbbf24,color:#fde68a,stroke-width:2px
    style streaming_automation_done fill:#1f2937,stroke:#fbbf24,color:#fde68a,stroke-width:2px
    style consumer_provider_done fill:#1f2937,stroke:#fbbf24,color:#fde68a,stroke-width:2px
    style provider_collection_done fill:#1f2937,stroke:#fbbf24,color:#fde68a,stroke-width:2px
    style ultimate_goal fill:#1f2937,stroke:#34d399,color:#a7f3d0,stroke-width:2px

    style recent fill:transparent,stroke:#c084fc,color:#c084fc,stroke-width:2px,stroke-dasharray:5 5
